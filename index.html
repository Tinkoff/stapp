
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Stapp Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="./" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./#stapp">
            
                    
                    Stapp
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="./">
            
                <a href="./#installation">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="./">
            
                <a href="./#introduction">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="./">
            
                <a href="./#stapp-core-concepts">
            
                    
                    Stapp core concepts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="./">
            
                <a href="./#quick-start">
            
                    
                    Quick start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5" data-path="./">
            
                <a href="./#modules">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6" data-path="./">
            
                <a href="./#peer-dependencies">
            
                    
                    Peer dependencies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7" data-path="./">
            
                <a href="./#license">
            
                    
                    License
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Guides
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="usage/Modules.html">
            
                <a href="usage/Modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="usage/epics.html">
            
                <a href="usage/epics.html">
            
                    
                    Epics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="usage/react.html">
            
                <a href="usage/react.html">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="usage/ssr.html">
            
                <a href="usage/ssr.html">
            
                    
                    SSR
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    API
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="api/createApp.html">
            
                <a href="api/createApp.html">
            
                    
                    createApp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="api/Stapp.html">
            
                <a href="api/Stapp.html">
            
                    
                    Stapp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="api/createEvent.html">
            
                <a href="api/createEvent.html">
            
                    
                    createEvent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="api/EventCreator.html">
            
                <a href="api/EventCreator.html">
            
                    
                    EventCreator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="api/createEffect.html">
            
                <a href="api/createEffect.html">
            
                    
                    createEffect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="api/EffectCreator.html">
            
                <a href="api/EffectCreator.html">
            
                    
                    EffectCreator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="api/createReducer.html">
            
                <a href="api/createReducer.html">
            
                    
                    createReducer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="api/Reducer.html">
            
                <a href="api/Reducer.html">
            
                    
                    Reducer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Modules
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="modules/persist.html">
            
                <a href="modules/persist.html">
            
                    
                    persist
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="modules/loaders.html">
            
                <a href="modules/loaders.html">
            
                    
                    loaders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="modules/formBase.html">
            
                <a href="modules/formBase.html">
            
                    
                    formBase
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="modules/validate.html">
            
                <a href="modules/validate.html">
            
                    
                    validate
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="types.html">
            
                <a href="types.html">
            
                    
                    Types definitions
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Stapp</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="stapp">Stapp</h1>
<p><a href="https://travis-ci.org/TinkoffCreditSystems/stapp" target="_blank"><img src="https://travis-ci.org/TinkoffCreditSystems/stapp.svg?branch=master" alt="Build Status"></a> <a href="https://www.typescriptlang.org/" target="_blank"><img src="https://img.shields.io/badge/written_in-typescript-blue.svg" alt="Written in typescript"></a> <a href="https://standardjs.com" target="_blank"><img src="https://img.shields.io/badge/code_style-standard-brightgreen.svg" alt="JavaScript Style Guide"></a> <a href="http://commitizen.github.io/cz-cli/" target="_blank"><img src="https://img.shields.io/badge/commitizen-friendly-brightgreen.svg" alt="Commitizen friendly"></a> <a href="https://www.npmjs.com/package/stapp" target="_blank"><img src="https://img.shields.io/npm/v/stapp.svg" alt="npm"></a></p>
<p>Stapp is the highly opinionated application state-management tool based on redux and RxJS with significantly reduced boilerplate. The primary goal of Stapp is to provide an easy way to create simple, robust and reusable applications.</p>
<p>Stapp comprises all the best practices and provides instruments to write understandable and predictable code.</p>
<p>Stapp includes:</p>
<ul>
<li>tools for creating reactive applications</li>
<li>full compatibility with redux tooling</li>
<li>SSR support</li>
<li>bunch of drop-in modules which handle common scenarios:<ul>
<li><code>formBase</code></li>
<li><code>validate</code></li>
<li><code>persist</code></li>
<li><code>loaders</code></li>
<li><code>routing</code> (in progress)</li>
</ul>
</li>
<li>React utilities:<ul>
<li>a higher order component and a render-prop component to connect to the state</li>
<li>form and field components</li>
</ul>
</li>
</ul>
<h3 id="table-of-contents">Table of contents</h3>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#stapp-core-concepts">Stapp core concepts</a></li>
<li><a href="#quick-start">Quick start</a></li>
<li><a href="#modules">Modules</a></li>
<li><a href="#peer-dependencies">Peer dependencies</a></li>
<li><a href="#license">License</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h2 id="installation">Installation</h2>
<pre><code class="lang-bash">npm install stapp
<span class="hljs-comment"># or</span>
yarn add stapp
</code></pre>
<h2 id="introduction">Introduction</h2>
<p>Here are some obvious statements:</p>
<ol>
<li>Small applications are easier to develop and maintain.</li>
<li>Small blocks of business logic are easier to develop and maintain.</li>
<li>Applications tend to become larger and harder to develop and maintain.</li>
</ol>
<p>Solution: separating applications into small and independent microapps.</p>
<p>That&apos;s what Stapp for.</p>
<h2 id="stapp-core-concepts">Stapp core concepts</h2>
<ol>
<li>The application consists of several logical blocks, or &quot;microapps&quot;;</li>
<li>Microapp has its state and provides an API to change that state.</li>
<li>Small blocks, called modules handle microapp state and logic.</li>
<li>Modules are shape-agnostic, knows little to nothing about an app or other modules.</li>
<li>Each module processes one task and nothing more.</li>
<li>Microapps can run autonomously and independently from each other.</li>
</ol>
<h2 id="quick-start">Quick start</h2>
<p>Here is a classic counter example:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// counterModule.js</span>
<span class="hljs-keyword">import</span> { createReducer, createEvent } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;stapp&apos;</span>

<span class="hljs-comment">/*
  First, we create an events creators. As stated,
  event creators create events. Modules can react
  to events with reducers  (used to change state)
  and epics (used to dispatch other events asynchronously).

  And yes, event creators are just action creators
  with some additional helpers.
*/</span>
<span class="hljs-keyword">const</span> increase = createEvent(<span class="hljs-string">&apos;Increase&apos;</span>)
<span class="hljs-keyword">const</span> decrease = createEvent(<span class="hljs-string">&apos;Decrease&apos;</span>)

<span class="hljs-comment">/*
  Classical reducer with additional helpers.
  No string literal types. Ever.
*/</span>
<span class="hljs-keyword">const</span> counterReducer = createReducer(<span class="hljs-number">0</span>)
  .on(increase, (state) =&gt; state + <span class="hljs-number">1</span>)
  .on(decrease, (state) =&gt; state - <span class="hljs-number">1</span>)

<span class="hljs-comment">/*
  Here is the module itself. This particular
  module exposes only state and API. The application will
  use provided state and bind provided event creators to
  the application API.
*/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> counterModule = {
  name: <span class="hljs-string">&apos;counter&apos;</span>,
  state: {
    counter: counterReducer
  },
  api: {
    increase,
    decrease
  }
}

<span class="hljs-comment">// app.js</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;stapp&apos;</span>
<span class="hljs-keyword">import</span> { counter } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./counterModule&apos;</span>

<span class="hljs-comment">/*
  And, finally, the application itself. CreateApp utilizes
  provided modules to create an application state and
  to build an application API and exposes state$ and api
  properties.
*/</span>
<span class="hljs-keyword">const</span> app = createApp({
  modules: [counter]
})

app
  .state$ <span class="hljs-comment">// state$ is an RxJS Observable of an application state</span>
  .subscribe(state =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`State: <span class="hljs-subst">${state}</span>`</span>))
<span class="hljs-comment">// State: { counter: 0 }</span>

app
  .api <span class="hljs-comment">// api is a set of provided event creators binded to the state</span>
  .increase()
<span class="hljs-comment">// State: { counter: 1 }</span>

app
  .api
  .decrease()
<span class="hljs-comment">// State: { counter: 0 }</span>

<span class="hljs-comment">// And hey, don&apos;t forget to check the redux devtools!</span>
</code></pre>
<p>So, a microapp in Stapp terminology is an object, that has only a few fields: <code>state$</code>, which is an observable state of an app, and an <code>api</code>, which comprises methods to change the state.</p>
<h2 id="modules">Modules</h2>
<p>CreateApp itself doesn&apos;t do much work. It sets up a redux store, a couple of middlewares and returns a Stapp object. Without modules, application api will be empty, and its state will be a plain empty object. Like, forever.</p>
<p>So, what are the modules? A module is a place where all your magic should happen. A module has an ability to:</p>
<ol>
<li>create and handle portions of an app state;</li>
<li>provide methods to a public application api;</li>
<li>react to state changes;</li>
<li>react to api calls.</li>
</ol>
<p>A basic module is an object or a function, returning an object. You&apos;ve already seen the basic example of a module. You may find other examples <a href="usage/Modules.html">in the docs</a>.</p>
<p>Stapp comes shipped with a few modules covering most common problems:</p>
<ul>
<li>Persist: the module that handles state persistence.</li>
<li>FormBase: the module that controls basic form needs: storing values and errors, determining if a form is intact and so on.</li>
</ul>
<h2 id="peer-dependencies">Peer dependencies</h2>
<p>Stapp is dependent on redux, fbjs and RxJS. React-bindings are dependent on react, reselect and prop-types.</p>
<p>The full peer-dependencies list looks like this:</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;fbjs&quot;</span>: <span class="hljs-string">&quot;&gt;=0.8&quot;</span>,
  <span class="hljs-string">&quot;prop-types&quot;</span>: <span class="hljs-string">&quot;&gt;=15.6&quot;</span>,
  <span class="hljs-string">&quot;react&quot;</span>: <span class="hljs-string">&quot;&gt;=15&quot;</span>,
  <span class="hljs-string">&quot;redux&quot;</span>: <span class="hljs-string">&quot;&gt;=3 &lt;4&quot;</span>,
  <span class="hljs-string">&quot;rxjs&quot;</span>: <span class="hljs-string">&quot;&gt;=5&quot;</span>,
  <span class="hljs-string">&quot;reselect&quot;</span>: <span class="hljs-string">&quot;&gt;=3&quot;</span>
}
</code></pre>
<h2 id="license">License</h2>
<pre><code>Copyright 2018 Tinkoff Bank

Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="./#installation" class="navigation navigation-next navigation-unique" aria-label="Next page: Installation">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Stapp","level":"1.1","depth":1,"next":{"title":"Installation","level":"1.1.1","depth":2,"anchor":"#installation","path":"README.md","ref":"README.md#installation","articles":[]},"dir":"ltr"},"config":{"plugins":[],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"README.md","mtime":"2018-06-20T15:25:43.492Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-06-20T15:25:53.424Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

